loandata_borrow = read.csv('../output/loandata_borrow_std.csv')
loandata_borrow = read.csv('../../output/loandata_borrow_std.csv')
loandata_repay = read.csv('../../output/loandata_repay_std.csv')
loandata_borrow.head()
head(loandata_borrow)
?str
str(loandata_borrow)
str(loandata_borrow)
source('D:/School/Python/FinalPaperExperiment/R/LR/title.R', encoding = 'UTF-8', echo=TRUE)
str(loandata_borrow)
summary(loandata_borrow)
?read.csv
loandata_borrow = loandata_borrow[,-loandata_borrow$X]
loandata_repay = loandata_repay[,-loandata_repay$X]
loandata_borrow = read.csv('../../output/loandata_borrow_std.csv')
str(loandata_borrow)
loandata_borrow = loandata_borrow[,-loandata_borrow$X]
str(loandata_borrow)
loandata_repay = loandata_repay[,-loandata_repay$X]
#数据摘要
str(loandata_repay)
loandata_borrow = read.csv('../../output/loandata_borrow_std.csv')
loandata_repay = read.csv('../../output/loandata_repay_std.csv')
loandata_borrow = loandata_borrow[,-1]
loandata_repay = loandata_repay[,-1]
str(loandata_borrow)
str(loandata_repay)
loandata_borrow$marital_status = as.factor(loandata_borrow$marital_status)
loandata_borrow$house = as.factor(loandata_borrow$house)
loandata_borrow$house_loan = as.factor(loandata_borrow$house_loan)
loandata_borrow$car = as.factor(loandata_borrow$car)
loandata_borrow$car_loan = as.factor(loandata_borrow$car_loan)
loandata_borrow$company_type = as.factor(loandata_borrow$company_type)
loandata_borrow$company_scale = as.factor(loandata_borrow$company_scale)
loandata_borrow$workcity = as.factor(loandata_borrow$workcity)
loandata_borrow$credit_report = as.factor(loandata_borrow$credit_report)
loandata_borrow$identity_authentication = as.factor(loandata_borrow$identity_authentication)
loandata_borrow$job_authentication = as.factor(loandata_borrow$job_authentication)
loandata_borrow$income_authentication = as.factor(loandata_borrow$income_authentication)
loandata_borrow$site_authentication = as.factor(loandata_borrow$site_authentication)
loandata_borrow$topic = as.factor(loandata_borrow$topic)
loandata_borrow$borrow_result = as.factor(loandata_borrow$borrow_result)
loandata_repay$marital_status = as.factor(loandata_repay$marital_status)
loandata_repay$house = as.factor(loandata_repay$house)
loandata_repay$house_loan = as.factor(loandata_repay$house_loan)
loandata_repay$car = as.factor(loandata_repay$car)
loandata_repay$car_loan = as.factor(loandata_repay$car_loan)
loandata_repay$company_type = as.factor(loandata_repay$company_type)
loandata_repay$company_scale = as.factor(loandata_repay$company_scale)
loandata_repay$workcity = as.factor(loandata_repay$workcity)
loandata_repay$credit_report = as.factor(loandata_repay$credit_report)
loandata_repay$identity_authentication = as.factor(loandata_repay$identity_authentication)
loandata_repay$job_authentication = as.factor(loandata_repay$job_authentication)
loandata_repay$income_authentication = as.factor(loandata_repay$income_authentication)
loandata_repay$site_authentication = as.factor(loandata_repay$site_authentication)
loandata_repay$topic = as.factor(loandata_repay$topic)
loandata_repay$repay_result = as.factor(loandata_repay$repay_result)
str(loandata_borrow)
str(loandata_repay)
x <- c(1,1)
x <- 2
x
lr_title <- glm(borrow_result~.,data = loandata_borrow,family = 'binomial')
summary(lr_title)
rm(lr_title)
lr_borrow <- glm(borrow_result~.,data = loandata_borrow,family = 'binomial')
summary(lr_borrow)
lr_repay <- glm(repay_result~.,data = loandata_repay,family = 'binomial')
summary(lr_repay)
table(loandata_repay$repay_result)
?sample
table(loandata_repay$repay_result)
loandata_repay_yes <- loandata_repay[loandata_repay$repay_result=='1',]
loandata_repay_no <- loandata_repay[loandata_repay$repay_result=='0',]
num_samples = 410
samples <- sample(length(loandata_repay_yes),num_samples)
loandata_repay_new <- rbind(loandata_repay_yes,loandata_repay_no)
length(loandata_repay_yes)
table(loandata_repay$repay_result)
str(loandata_repay)
length(loandata_repay_no)
length(loandata_repay_yes)
nrow(loandata_repay_yes)
table(loandata_repay$repay_result)
nrow(loandata_repay_no)
samples <- sample(nrow(loandata_repay_yes),num_samples)
loandata_repay_new <- rbind(loandata_repay_yes,loandata_repay_no)
summary(loandata_repay_new)
loandata_repay_new <- rbind(loandata_repay_yes[samples,],loandata_repay_no)
summary(loandata_repay_new)
lr_repay <- glm(repay_result~.,data = loandata_repay_new,family = 'binomial')
summary(lr_repay)
num_samples = 200
samples <- sample(nrow(loandata_repay_yes),num_samples)
loandata_repay_new <- rbind(loandata_repay_yes[samples,],loandata_repay_no)
lr_repay <- glm(repay_result~.,data = loandata_repay_new,family = 'binomial')
summary(lr_repay)
num_samples = 41
samples <- sample(nrow(loandata_repay_yes),num_samples)
loandata_repay_new <- rbind(loandata_repay_yes[samples,],loandata_repay_no)
lr_repay <- glm(repay_result~.,data = loandata_repay_new,family = 'binomial')
summary(lr_repay)
rm(x)
str(loandata_borrow)
str(loandata_all_borrow)
library(RODBC)
#从mysql中读取数据
conn <- odbcConnect('mysqlodbc','root','charrychen')
loandata_all <- sqlFetch(conn,'loandata_clean')
close(conn)
as.data.frame(loandata_all)
str(loandata_all)
loandata_all <- loandata_all[,-c(1,2,3)]
str(loandata_all)
loandata_all$loan_status <- as.factor(loandata_all$loan_status)
loandata_all$marital_status <- as.factor(loandata_all$marital_status)
loandata_all$house <- as.factor(loandata_all$house)
loandata_all$house_loan <- as.factor(loandata_all$house_loan)
loandata_all$car <- as.factor(loandata_all$car)
loandata_all$car_loan <- as.factor(loandata_all$car_loan)
loandata_all$company_scale <- as.factor(loandata_all$company_scale)
loandata_all$company_type <- as.factor(loandata_all$company_type)
loandata_all$workcity <- as.factor(loandata_all$workcity)
loandata_all$credit_report <- as.factor(loandata_all$credit_report)
loandata_all$identity_authentication <- as.factor(loandata_all$identity_authentication)
loandata_all$job_authentication <- as.factor(loandata_all$job_authentication)
loandata_all$income_authentication <- as.factor(loandata_all$income_authentication)
loandata_all$site_authentication <- as.factor(loandata_all$site_authentication)
loandata_all_borrow <- loandata_all
loandata_all_repay <- loandata_all
loandata_all_borrow$borrow_result <- ifelse(loandata$loan_status=='0',0,1)
loandata_all_repay$repay_result <- ifelse(loandata$loan_status=='3',0,ifelse(loandata$loan_status=='2',1,NA))
loandata_all_borrow$borrow_result <- as.factor(loandata_all_borrow$borrow_result)
loandata_all_repay$repay_result <- as.factor(loandata_all_repay$repay_result)
loandata_all_borrow <- loandata_all
loandata_all_repay <- loandata_all
loandata_all_borrow$borrow_result <- ifelse(loandata_all$loan_status=='0',0,1)
loandata_all_repay$repay_result <- ifelse(loandata_all$loan_status=='3',0,ifelse(loandata_all$loan_status=='2',1,NA))
loandata_all_borrow$borrow_result <- as.factor(loandata_all_borrow$borrow_result)
loandata_all_repay$repay_result <- as.factor(loandata_all_repay$repay_result)
str(loandata_all_borrow)
loandata_all_borrow <- loandata_all_borrow[,-4]
loandata_all_repay <- loandata_all_repay[,-4]
str(loandata_all_borrow)
loandata_all_repay <- na.omit(loandata_all_repay) #删除缺失值
loandata_all_repay_yes <- loandata_all_repay[loandata_all_repay$repay_result=='1',]
loandata_all_repay_no <- loandata_all_repay[loandata_all_repay$repay_result=='0',]
num_samples <- 1560
samples <- sample(nrow(loandata_all_repay_yes),num_samples)
loandata_repay_new <- rbind(loandata_all_repay_no,loandata_all_repay_yes[samples,])
lr_repay <- glm(repay_result~.,data = loandata_repay_new,family = 'binomial')
summary(lr_repay)
num_samples <- 156
samples <- sample(nrow(loandata_all_repay_yes),num_samples)
loandata_repay_new <- rbind(loandata_all_repay_no,loandata_all_repay_yes[samples,])
lr_repay <- glm(repay_result~.,data = loandata_repay_new,family = 'binomial')
summary(lr_repay)
lr_borrow <- glm(borrow_result~.,data = loandata_borrow,family = 'binomial')
summary(lr_borrow)
